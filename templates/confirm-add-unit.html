<!DOCTYPE HTML>
<html>
  <head>
  </head>
  <body>
    {{confirm|safe}}

    <button onclick="deleteAllCookies();redirect('/confirmed_add_unit')">Confirm</button>
    <button onclick="setAddUnitCookies();redirect('/add-unit')">Go Back</button>

    <script>
      function redirect(redirectURL) {
        document.location.href = redirectURL;
      }

      function setCookie(cookieName, cookieValue) {
        document.cookie = cookieName + "=" + cookieValue + "; path=/";
      }

      function getCookie(cookieName) {
        var name = cookieName + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var cookieArray = decodedCookie.split(";");

        for (let i=0; i<cookieArray.length; i++) {
          var cookie = cookieArray[i];
          while (cookie.charAt(0) === " ") {
            cookie = cookie.substring(1);
          }

          if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length);
          }
        }
        return "";
      }

      function setAddUnitCookies() {
        setCookie('type', document.getElementById('type').innerHTML);
        setCookie('name', document.getElementById('name').innerHTML);
        setCookie('abbreviation', document.getElementById('abbreviation').innerHTML);
        setCookie('convert-to', document.getElementById('convert-to').innerHTML);
        setCookie('to-unit', document.getElementById('to-unit').innerHTML);
      }

      function deleteAllCookies() {
        var cookies = document.cookie.split(";");

        for (var i = 0; i < cookies.length; i++) {
          var cookie = cookies[i];
          var eqPos = cookie.indexOf("=");
          var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
          document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
        }
      }
    </script>
  </body>
</html>
